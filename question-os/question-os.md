# question-os
some questions and answers for operate system.

#### 1. 进程和线程的区别？
项 | 进程 | 线程
-|-|-
调度 | 系统分配调度的一个基本单位，至少拥有一个线程 | 一个使用资源的基本单位
资源 | 拥有独立的地址空间，资源共享复杂，同步简单 | 共享进程资源，共享简单
占用内存 | 占用内存多，切换复杂，CPU利用率低 | 占用内存少，切换简单，CPU利用率高
相互影响 | 进程间不会相互影响 | 一个线程挂掉可能导致整个进程挂掉

#### 2. 并发和并行的区别？
单核机器上，多进程并不是真正的多个进程同时执行，而是通过CPU的时间分片，操作系统在多个进程间快速切换，达到一种同时执行的效果，这种称为并发。<br>
多核CPU能够实现真正的多个进程并行执行，这种称为并行。<br>

#### 3.同步、异步、阻塞、非阻塞？
同步和异步是针对应用程序和内核的交互而言的。同步需要主动去询问，异步中内核在IO事件发生的时候通知应用程序。<br>
阻塞和非阻塞是针对进程在访问数据的时候，根据IO操作的就绪状态来采取不同的方式，读取或者写入操作函数的实现方式。<br>

同步和异步是目的，阻塞和非阻塞是实现方式。<br>

同步：用户进程触发IO操作并等待或者轮询的查看IO操作是否就绪。<br>
异步：用户进程触发IO操作后做自己的事情，IO操作完成的时候会得到IO操作的通知，异步的特点就是通知。<br>
使用异步IO时，Java将IO读写委托给操作系统处理，将数据缓冲区地址和大小传给操作系统。

阻塞：当试图对文件描述符进行读写时，如果没有可读，或者暂时不可写，程序就进入等待状态，直到有东西可读或可写为止。<br>
非阻塞：如果没有可读或者暂时不可写，读写函数马上返回，而不会等待。<br>

同步阻塞IO（Java BIO）：服务端实现方式为一个连接一个线程，客户端有连接请求时服务端就要启动一个线程处理。<br>
同步非阻塞IO（Java NIO）：服务端实现方式为一个请求一个线程，

#### 4. Linux和Windows的区别？
项 | Linux | Windows
-|-|-
大小写 | 区分大小写 | dos命令不区分大小写
文件 | 所有内容以文件的形式保存，包括用户、硬件 | 文件和硬件无关
扩展名 | 无扩展名的概念 | 用扩展名区分文件

#### 5. Linux有哪些通信方式？

#### 6. Linux的共享内存如何实现？

#### 7. 进程间的通信方式？
(1) 管道（pipe）：管道是一种半双工的通信方式，数据只能单向流动，而且只能在具有亲缘关系的进程间使用。进程间的亲缘关系通常是指父子进程关系。<br>
(2) 有名管道（named pipe）：有名管道也是半双工的通信方式，但它允许无亲缘关系的进程间通信。<br>
(3) 信号量（semophore）：信号量是一个计数器，可以用来控制多个进程对共享资源的访问。常作为一种锁机制，防止某进程正在访问共享资源时，其他进程也访问该资源。因此，主要作为进程间以及同一进程的线程之间的同步手段。<br>
(4) 消息队列（message queue）：消息队列是由消息的链表，存放在内核中并由消息队列标识符标识。消息队列克服了信号量传递信息少、管道只能承载无格式字节流及缓冲区大小受限等缺点。<br>
(5) 信号（signal）：一种比较复杂的通信方式，用于通知接收进程某个事件已经发生。<br>
(6) 共享内存（shared memory）：映射一段能被其他进程访问的内存，这段内存由一个进程创建，但多个进程都可以访问。共享内存是最快的IPC方式，针对其他进程间通信方式运行效率低而设计的，往往与其他进程间通信方式，如信号量，配合使用。<br>
(7) 套接字（socket）：可用于不同机器间的进程通信。

#### 8. 使用位运算判断一个数是不是2的幂？
x & (x - 1) == 0<br>
2的幂的二进制表示是1000...000，减去1表示为0111...111，进行与运算结果为0.

#### 9. 计算-2>>1，-2>>>1
\>>带符号右移，负数符号位补1，正数符号位补0；>>>无符号右移，正负数符号位都补0。<br>
负数的二进制表示为正数取反加一，-2表示为1111 1111 1111 1111 1111 1111 1111 1110，带符号右移一位后为1111 1111 1111 1111 1111 1111 1111 1111，十进制为-1。<br>
-2无符号右移一位后为0111 1111 1111 1111 1111 1111 1111 1111，即2^31-1

#### 10. 虚拟内存和物理内存？换页？
操作系统的内存分为物理内存和虚拟内存，虚拟内存一般使用的是页面映射文件，即硬盘中的某些特殊的文件，操作系统负责页面文件内容的读写，这个过程叫做“页面中断/切换”。

#### 11. 什么是协程？和线程的区别？
协程是一种用户态的轻量级线程，协程的调度完全由用户控制。<br>
协程拥有自己的寄存器上下文和栈。<br>
协程调度切换时，将寄存器上下文和栈保存起来，切回来的时候恢复之前保存的寄存器上下文和栈，直接操作栈则基本没有内核切换的开销，可以不加锁的访问全局变量，所以上下文的切换非常快。<br>



































#### 100.
